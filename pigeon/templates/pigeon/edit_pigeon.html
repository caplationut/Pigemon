{% extends "breeder/base.html" %}
{% load static %}
{% load i18n %}
{% load l10n %}
{% load widget_tweaks %}
{% block csslibs %}
    {{ block.super }}
    <script src="{% static 'libs/datatable/handsontable.full.min.js' %}"></script>
    <link href="{% static 'libs/datatable/handsontable.full.css' %}" rel="stylesheet"/>
{% endblock csslibs %}
{% block content %}
    <div class="container-xl">
        <!-- Page title -->
        <div class="page-header">
            <div class="row align-items-center">
                <div class="col">
                    <div class="page-pretitle">
                        <span class="badge badge-outline text-azure"
                              title="{% translate "Loft name" %}">{{ pigeon.loft.name }}
                        </span>
                    </div>
                    <h2 class="page-title">
                        {{ pigeon.ring_serial }}
                    </h2>
                </div>
                <div class="col-auto ms-auto">
                    <div class="btn-group w-100">
                        <a href="#" class="btn btn-icon" aria-label="Button">
                            <!-- Download SVG icon from http://tabler-icons.io/i/bold -->
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24"
                                 viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none"
                                 stroke-linecap="round" stroke-linejoin="round">
                                <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                                <path d="M7 5h6a3.5 3.5 0 0 1 0 7h-6z"></path>
                                <path d="M13 12h1a3.5 3.5 0 0 1 0 7h-7v-7"></path>
                            </svg>
                        </a>
                        <a href="#" class="btn btn-icon" aria-label="Button">
                            <!-- Download SVG icon from http://tabler-icons.io/i/italic -->
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24"
                                 viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none"
                                 stroke-linecap="round" stroke-linejoin="round">
                                <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                                <line x1="11" y1="5" x2="17" y2="5"></line>
                                <line x1="7" y1="19" x2="13" y2="19"></line>
                                <line x1="14" y1="5" x2="10" y2="19"></line>
                            </svg>
                        </a>
                        <a href="#" class="btn btn-icon" aria-label="Button">
                            <!-- Download SVG icon from http://tabler-icons.io/i/underline -->
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24"
                                 viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none"
                                 stroke-linecap="round" stroke-linejoin="round">
                                <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                                <path d="M7 5v5a5 5 0 0 0 10 0v-5"></path>
                                <path d="M5 19h14"></path>
                            </svg>
                        </a>
                        <a href="#" class="btn btn-icon" aria-label="Button">
                            <!-- Download SVG icon from http://tabler-icons.io/i/copy -->
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24"
                                 viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none"
                                 stroke-linecap="round" stroke-linejoin="round">
                                <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                                <rect x="8" y="8" width="12" height="12" rx="2"></rect>
                                <path d="M16 8v-2a2 2 0 0 0 -2 -2h-8a2 2 0 0 0 -2 2v8a2 2 0 0 0 2 2h2"></path>
                            </svg>
                        </a>
                        <a href="#" class="btn btn-icon" aria-label="Button">
                            <!-- Download SVG icon from http://tabler-icons.io/i/scissors -->
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24"
                                 viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none"
                                 stroke-linecap="round" stroke-linejoin="round">
                                <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                                <circle cx="6" cy="7" r="3"></circle>
                                <circle cx="6" cy="17" r="3"></circle>
                                <line x1="8.6" y1="8.6" x2="19" y2="19"></line>
                                <line x1="8.6" y1="15.4" x2="19" y2="5"></line>
                            </svg>
                        </a>
                        <a href="#" class="btn btn-icon" aria-label="Button">
                            <!-- Download SVG icon from http://tabler-icons.io/i/file-plus -->
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24"
                                 viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none"
                                 stroke-linecap="round" stroke-linejoin="round">
                                <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                                <path d="M14 3v4a1 1 0 0 0 1 1h4"></path>
                                <path d="M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z"></path>
                                <line x1="12" y1="11" x2="12" y2="17"></line>
                                <line x1="9" y1="14" x2="15" y2="14"></line>
                            </svg>
                        </a>
                        <a href="#" class="btn btn-icon" aria-label="Button">
                            <!-- Download SVG icon from http://tabler-icons.io/i/file-minus -->
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24"
                                 viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none"
                                 stroke-linecap="round" stroke-linejoin="round">
                                <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                                <path d="M14 3v4a1 1 0 0 0 1 1h4"></path>
                                <path d="M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z"></path>
                                <line x1="9" y1="14" x2="15" y2="14"></line>
                            </svg>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="page-body">
        <div class="container-xl">
            <div class="row row-cards">
                <div class="col-lg-9">
                    <div class="card">
                        {% if pigeon.gender == "MA" %}
                            <div class="ribbon bg-azure">
                                <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24"
                                     height="24" viewBox="0 0 24 24" stroke-width="2"
                                     stroke="currentColor" fill="none" stroke-linecap="round"
                                     stroke-linejoin="round">
                                    <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                                    <circle cx="10" cy="14" r="5"></circle>
                                    <path d="M19 5l-5.4 5.4"></path>
                                    <path d="M19 5h-5"></path>
                                    <path d="M19 5v5"></path>
                                </svg>
                            </div>
                        {% elif pigeon.gender == "FE" %}
                            <div class="ribbon bg-pink">
                                <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24"
                                     height="24" viewBox="0 0 24 24" stroke-width="2"
                                     stroke="currentColor" fill="none" stroke-linecap="round"
                                     stroke-linejoin="round">
                                    <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                                    <circle cx="12" cy="9" r="5"></circle>
                                    <path d="M12 14v7"></path>
                                    <path d="M9 18h6"></path>
                                </svg>
                            </div>
                        {% else %}
                            <div class="ribbon bg-orange">
                                <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24"
                                     height="24" viewBox="0 0 24 24" stroke-width="2"
                                     stroke="currentColor" fill="none" stroke-linecap="round"
                                     stroke-linejoin="round">
                                    <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                                    <circle cx="12" cy="12" r="6"></circle>
                                    <path d="M7 12h11"></path>
                                </svg>
                            </div>
                        {% endif %}
                        <div class="card-header">
                            <ul class="nav nav-tabs card-header-tabs" data-bs-toggle="tabs">
                                <li class="nav-item">
                                    <a href="#tabs-home-13" class="nav-link active" data-bs-toggle="tab">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="icon me-2" width="24"
                                             height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"
                                             fill="none" stroke-linecap="round" stroke-linejoin="round">
                                            <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                                            <circle cx="12" cy="12" r="9"></circle>
                                            <line x1="12" y1="8" x2="12.01" y2="8"></line>
                                            <polyline points="11 12 12 12 12 16 13 16"></polyline>
                                        </svg>
                                        {% translate "Info" %}</a>
                                </li>
                                <li class="nav-item">
                                    <a href="#tabs-profile-13" class="nav-link" data-bs-toggle="tab">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="icon me-2" width="24"
                                             height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"
                                             fill="none" stroke-linecap="round" stroke-linejoin="round">
                                            <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                                            <circle cx="12" cy="5" r="2"></circle>
                                            <circle cx="8" cy="12" r="2"></circle>
                                            <circle cx="12" cy="19" r="2"></circle>
                                            <circle cx="20" cy="19" r="2"></circle>
                                            <circle cx="4" cy="19" r="2"></circle>
                                            <circle cx="16" cy="12" r="2"></circle>
                                            <path d="M5 17l2 -3"></path>
                                            <path d="M9 10l2 -3"></path>
                                            <path d="M13 7l2 3"></path>
                                            <path d="M17 14l2 3"></path>
                                            <path d="M15 14l-2 3"></path>
                                            <path d="M9 14l2 3"></path>
                                        </svg>
                                        {% translate "Relatives" %}</a>
                                </li>
                                <li class="nav-item">
                                    <a href="#tabs-activity-13" class="nav-link" data-bs-toggle="tab">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="icon me-2" width="24"
                                             height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"
                                             fill="none" stroke-linecap="round" stroke-linejoin="round">
                                            <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                                            <line x1="3" y1="21" x2="21" y2="21"></line>
                                            <path d="M5 21v-16a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2v16"></path>
                                            <path d="M9 21v-4a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v4"></path>
                                            <line x1="10" y1="9" x2="14" y2="9"></line>
                                            <line x1="12" y1="7" x2="12" y2="11"></line>
                                        </svg>
                                        {% translate "Medication" %}</a>
                                </li>
                            </ul>
                        </div>
                        <div class="card-body">
                            <div class="tab-content">
                                <div class="tab-pane active show" id="tabs-home-13">
                                    <div class="col-md-5">
                                        <div class="mb-3">
                                            <label class="form-label">Company</label>
                                            <input type="text" class="form-control" disabled=""
                                                   placeholder="Company" value="Creative Code Inc.">
                                        </div>
                                    </div>
                                    <div class="col-sm-6 col-md-3">
                                        <div class="mb-3">
                                            <label class="form-label">Username</label>
                                            <input type="text" class="form-control" placeholder="Username"
                                                   value="michael23">
                                        </div>
                                    </div>
                                    <div class="col-sm-6 col-md-4">
                                        <div class="mb-3">
                                            <label class="form-label">Email address</label>
                                            <input type="email" class="form-control" placeholder="Email">
                                        </div>
                                    </div>
                                </div>
                                <div class="tab-pane" id="tabs-profile-13">
                                    <h4>Profile tab</h4>
                                    <div>Fringilla egestas nunc quis tellus diam rhoncus ultricies tristique enim at
                                        diam, sem nunc amet, pellentesque id egestas velit sed
                                    </div>
                                </div>
                                <div class="tab-pane" id="tabs-activity-13">
                                    <h4>Activity tab</h4>
                                    <div>Donec ac vitae diam amet vel leo egestas consequat rhoncus in luctus amet,
                                        facilisi sit mauris accumsan nibh habitant senectus
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-3">
                    <div class="card card-stacked">
                        <div class="card-header">
                            <h3 class="card-title">{% translate "Field completion" %}</h3>
                        </div>
                        <div class="card-body">
                            <div id="field-completion"></div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-9">
                    <div class="card card-lg">

                        <div class="card-header">
                            <h3 class="card-title">{% translate "Pigeon details" %}</h3>
                        </div>
                        <div class="card-tabs ">
                            <!-- Cards navigation -->
                            <ul class="nav nav-tabs">
                                <li class="nav-item">
                                    <a href="#tab-top-1" class="nav-link active"
                                       data-bs-toggle="tab">{% translate "Info" %}</a>
                                </li>
                                <li class="nav-item">
                                    <a href="#tab-top-2" class="nav-link"
                                       data-bs-toggle="tab">{% translate "Relatives" %}</a>
                                </li>
                                <li class="nav-item">
                                    <a href="#tab-top-3" class="nav-link"
                                       data-bs-toggle="tab">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="icon nav-link-icon"
                                             width="24"
                                             height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"
                                             fill="none" stroke-linecap="round" stroke-linejoin="round">
                                            <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                                            <path d="M12 17.75l-6.172 3.245l1.179 -6.873l-5 -4.867l6.9 -1l3.086
                                            -6.253l3.086 6.253l6.9 1l-5 4.867l1.179 6.873z"></path>
                                        </svg>
                                        {% translate "Medication" %}</a>
                                </li>
                                <li class="nav-item"><a href="#tab-top-4" class="nav-link" data-bs-toggle="tab">Tab
                                    4</a></li>
                            </ul>
                            <div class="tab-content">
                                <!-- Content of card #1 -->
                                <div id="tab-top-1" class="card tab-pane active show">
                                    <div class="card-body">
                                        <div class="row row-cards">
                                            <form method="post" action="">{% csrf_token %}

                                                <div class="mb-3">
                                                    <label class="form-label required">{{ form.loft.label_tag }}</label>
                                                    {{ form.loft|add_class:"form-select" }}
                                                    {% if form.errors %}
                                                        <small class="form-hint text-danger">{{ form.loft.errors }}</small>
                                                    {% else %}
                                                        <small class="form-hint text-cyan">{{ form.loft.help_text }}</small>
                                                    {% endif %}
                                                    <label class="form-label required">{% translate "Ring details" %}</label>
                                                    {{ form.pigeon_country_code }}
                                                    <datalist id="countryOptions">
                                                        <option value="BE"></option>
                                                        <option value="BG"></option>
                                                        <option value="DE"></option>
                                                        <option value="FR"></option>
                                                        <option value="HU"></option>
                                                        <option value="IT"></option>
                                                        <option value="MD"></option>
                                                        <option value="NL"></option>
                                                        <option value="PL"></option>
                                                        <option value="RO"></option>
                                                    </datalist>
                                                    {% if form.errors %}
                                                        <small class="form-hint text-danger">
                                                            {{ form.pigeon_country_code.errors }}
                                                        </small>
                                                    {% else %}
                                                        <small class="form-hint text-cyan">
                                                            {{ form.pigeon_country_code.help_text }}
                                                        </small>
                                                    {% endif %}
                                                </div>
                                                <div class="mb-3">
                                                    <div class="col-sm-2">
                                                        {{ form.pigeon_organisation }}
                                                        {% if form.errors %}
                                                            <small class="form-hint text-danger">
                                                                {{ form.pigeon_organisation.errors }}
                                                            </small>
                                                        {% else %}
                                                            <small class="form-hint text-cyan">
                                                                {{ form.pigeon_organisation.help_text }}
                                                            </small>
                                                        {% endif %}
                                                    </div>
                                                    <div class="col-sm-3">
                                                        {{ form.pigeon_ring_number }}
                                                        {% if form.errors %}
                                                            <small class="form-hint text-danger">
                                                                {{ form.pigeon_ring_number.errors }}
                                                            </small>
                                                        {% else %}
                                                            <small class="form-hint text-cyan">
                                                                {{ form.pigeon_ring_number.help_text }}
                                                            </small>
                                                        {% endif %}
                                                    </div>
                                                    <div class="col-sm-2">
                                                        {{ form.ring_year }}
                                                        {% if form.errors %}
                                                            <small class="form-hint text-danger">
                                                                {{ form.ring_year.errors }}
                                                            </small>
                                                        {% else %}
                                                            <small class="form-hint text-cyan">
                                                                {{ form.ring_year.help_text }}
                                                            </small>
                                                        {% endif %}
                                                    </div>
                                                </div>
                                                <div class="form-group mb-3 row">
                                                    <label class="col-sm-3 col-form-label">{{ form.color.label_tag }}</label>
                                                    <div class="col-sm-4">
                                                        {{ form.color }}
                                                        {% if form.errors %}
                                                            <small class="form-hint text-danger">{{ form.color.errors }}</small>
                                                        {% else %}
                                                            <small class="form-hint text-cyan">{{ form.color.help_text }}</small>
                                                        {% endif %}
                                                    </div>
                                                    <label class="col-sm-2 col-form-label">{{ form.eye_color.label_tag }}</label>
                                                    <div class="col-sm-3">
                                                        {{ form.eye_color }}
                                                        {% if form.errors %}
                                                            <small class="form-hint text-danger">{{ form.eye_color.errors }}</small>
                                                        {% else %}
                                                            <small class="form-hint text-cyan">{{ form.eye_color.help_text }}</small>
                                                        {% endif %}
                                                    </div>
                                                </div>
                                                <div class="form-group mb-3 row">
                                                    <label class="col-2 col-form-label required">{{ form.gender.label_tag }}</label>
                                                    <div class="col-6">
                                                        {{ form.gender|add_class:'form-select' }}
                                                        {% if form.errors %}
                                                            <small class="form-hint text-danger">{{ form.gender.errors }}</small>
                                                        {% else %}
                                                            <small class="form-hint text-cyan">{{ form.gender.help_text }}</small>
                                                        {% endif %}
                                                    </div>
                                                </div>
                                                <div class="form-group mb-3 row">
                                                    <label class="col-2 col-form-label">{{ form.sire.label_tag }}</label>
                                                    <div class="col-sm-2">
                                                        {{ form.sire|attr:"autofocus"|attr:'select-sire' }}
                                                        {% if form.errors %}
                                                            <small class="form-hint text-danger">{{ form.sire.errors }}</small>
                                                        {% else %}
                                                            <small class="form-hint text-cyan">{{ form.sire.help_text }}</small>
                                                        {% endif %}
                                                    </div>
                                                    <div class="col-1"></div>
                                                    <label class="col-1 col-form-label">{{ form.dam.label_tag }}</label>
                                                    <div class="col-sm-2">
                                                        {{ form.dam|attr:'select-dam' }}
                                                        {% if form.errors %}
                                                            <small class="form-hint text-danger">{{ form.dam.errors }}</small>
                                                        {% else %}
                                                            <small class="form-hint text-cyan">{{ form.dam.help_text }}</small>
                                                        {% endif %}
                                                    </div>
                                                </div>
                                                <div class="form-group mb-3 row">
                                                    <label class="col-2 col-form-label">{{ form.strain.label_tag }}</label>
                                                    <div class="col-2">
                                                        {{ form.strain }}
                                                        {% if form.errors %}
                                                            <small class="form-hint text-danger">{{ form.strain.errors }}</small>
                                                        {% else %}
                                                            <small class="form-hint text-cyan">{{ form.strain.help_text }}</small>
                                                        {% endif %}
                                                    </div>
                                                    <div class="col-1"></div>
                                                    <label class="col-1 col-form-label">{{ form.line.label_tag }}</label>
                                                    <div class="col-2">
                                                        {{ form.line }}
                                                        {% if form.errors %}
                                                            <small class="form-hint text-danger">{{ form.line.errors }}</small>
                                                        {% else %}
                                                            <small class="form-hint text-cyan">{{ form.line.help_text }}</small>
                                                        {% endif %}
                                                    </div>
                                                </div>
                                                <div class="form-group mb-3 row">
                                                    <label class="col-sm-3 col-form-label required">{{ form.status.label_tag }}</label>
                                                    <div class="col-sm-5">
                                                        {{ form.status }}
                                                        {% if form.errors %}
                                                            <small class="form-hint text-danger">{{ form.status.errors }}</small>
                                                        {% else %}
                                                            <small class="form-hint text-cyan">{{ form.status.help_text }}</small>
                                                        {% endif %}
                                                    </div>
                                                </div>
                                                <div class="form-group mb-3 row">
                                                    <label class="col-sm-3 col-form-label required">{{ form.section.label_tag }}</label>
                                                    <div class="col-sm-5">
                                                        {{ form.section|add_class:'form-select' }}
                                                        {% if form.errors %}
                                                            <small class="form-hint text-danger">{{ form.section.errors }}</small>
                                                        {% else %}
                                                            <small class="form-hint text-cyan">{{ form.section.help_text }}</small>
                                                        {% endif %}
                                                    </div>
                                                </div>
                                                <div class="form-footer">
                                                    <button type="submit" class="btn btn-primary">Submit</button>
                                                </div>
                                                {{ form.errors }}
                                            </form>
                                        </div>
                                    </div>
                                </div>
                                <!-- Content of card #2 -->
                                <div id="tab-top-2" class="card tab-pane">
                                    <div class="card-body">

                                    </div>
                                </div>
                                <!-- Content of card #3 -->
                                <div id="tab-top-3" class="card tab-pane">
                                    <div class="card-body">
                                        <div class="card-title">Content of tab #3</div>
                                        <p class="text-muted">
                                            Lorem ipsum dolor sit amet, consectetur adipisicing elit. Adipisci,
                                            alias aliquid distinctio dolorem expedita, fugiat hic magni molestiae
                                            molestias odit.
                                        </p>
                                    </div>
                                </div>
                                <!-- Content of card #4 -->
                                <div id="tab-top-4" class="card tab-pane">
                                    <div class="card-body">
                                        <div class="card-title">Content of tab #4</div>
                                        <p class="text-muted">
                                            Lorem ipsum dolor sit amet, consectetur adipisicing elit. Adipisci,
                                            alias aliquid distinctio dolorem expedita, fugiat hic magni molestiae
                                            molestias odit.
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>
{% endblock %}
{% block jslibs %}
    <!-- Libs JS -->
    <script src="{% static 'libs/fslightbox/index.js' %}" defer></script>
    <script src="{% static 'libs/apexcharts/dist/apexcharts.min.js' %}" defer></script>
    <script>
        // @formatter:off
        document.addEventListener("DOMContentLoaded", function () {
            window.ApexCharts && (new ApexCharts(document.getElementById('field-completion'), {
                chart: {
                    type: "radialBar",
                    height: 280,
                },
                series: [{{ pigeon.field_completion|unlocalize }}],
                colors: ["#4299E1"],
                plotOptions: {
                    radialBar: {
                        hollow: {
                            margin: 0,
                            size: "70%",
                            background: "#1D273B"
                        },
                        track: {
                            dropShadow: {
                                enabled: true,
                                top: 2,
                                left: 0,
                                blur: 4,
                                opacity: 0.15
                            }
                        },
                        dataLabels: {
                            name: {
                                offsetY: -10,
                                color: "#fff",
                                fontSize: "13px"
                            },
                            value: {
                                color: "#fff",
                                fontSize: "30px",
                                show: true
                            }
                        }
                    }
                },
                fill: {
                    type: "gradient",
                    gradient: {
                        shade: "dark",
                        type: "vertical",
                        {% if pigeon.field_completion < 70 %}
                            gradientToColors: ["#82D18E"],
                        {% else %}
                            gradientToColors: ["#2FB344"],
                        {% endif %}
                        stops: [0, 100]
                    }
                },
                stroke: {
                    lineCap: "round"
                },
                labels: ["{{ pigeon }}"]
            })).render();
        });
        // @formatter:on
    </script>
    <script>
        const data = [
            {% for p in pigeon.children %}
                {
                    ring: `<a href="{% url 'edit-pigeon' p.pk %}">{{ p }}</a>`,
                    gender: {% if p.gender == "MA" %}
                        `<svg xmlns="http://www.w3.org/2000/svg" class="avatar avatar-sm bg-azure-lt" width="24"
                             height="24" viewBox="0 0 24 24" stroke-width="2"
                             stroke="currentColor" fill="none" stroke-linecap="round"
                             stroke-linejoin="round">
                           <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                           <circle cx="10" cy="14" r="5"></circle>
                           <path d="M19 5l-5.4 5.4"></path>
                           <path d="M19 5h-5"></path>
                           <path d="M19 5v5"></path>
                        </svg>`
                            {% elif p.gender == "FE" %}
                            `<svg xmlns="http://www.w3.org/2000/svg" class="avatar avatar-sm bg-pink-lt" width="24"
                             height="24" viewBox="0 0 24 24" stroke-width="2"
                             stroke="currentColor" fill="none" stroke-linecap="round"
                             stroke-linejoin="round">
                           <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                           <circle cx="12" cy="9" r="5"></circle>
                           <path d="M12 14v7"></path>
                           <path d="M9 18h6"></path>
                        </svg>`
                            {% else %}
                            `<svg xmlns="http://www.w3.org/2000/svg" class="avatar avatar-sm bg-orange-lt" width="24"
                             height="24" viewBox="0 0 24 24" stroke-width="2"
                             stroke="currentColor" fill="none" stroke-linecap="round"
                             stroke-linejoin="round">
                           <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                           <circle cx="12" cy="12" r="6"></circle>
                           <path d="M7 12h11"></path>
                        </svg>`
                    {% endif %},
                    color: "{% translate p.color.color %}",
                },
            {% endfor %}
        ]
        let container = document.querySelector('.offspring');
        const searchField = document.querySelector('#search_field');

        let hot = new Handsontable(container, {
            data: data, // Initiating handsontable object
            colHeaders: ['{% translate "Ring details" %}', '{% translate "Gender" %}', '{% translate "Color" %}'],
            rowHeaders: true,
            // dropdownMenu: true,
            filters: true,
            search: true,
            contextMenu: true,
            editor: false,
            width: '100%',
            height: 'auto',
            stretchH: 'all',
            // dropdownMenu: ['filter_by_condition', 'filter_action_bar'],
            rowHeights: 30,
            columnSorting: true,
            // className: ['htCenter'],
            allowHtml: true,
            columns: [
                {data: "ring", renderer: safeHtmlRenderer},
                {data: "gender", renderer: safeHtmlRenderer},
                {data: "color", renderer: Handsontable.renderers.TextRenderer},
            ],
            licenseKey: 'non-commercial-and-evaluation'
        });

        function safeHtmlRenderer(instance, td, row, col, prop, value, cellProperties) {
            // be sure you only allow certain HTML tags to avoid XSS threats (you should also remove unwanted HTML attributes)
            td.innerHTML = Handsontable.helper.sanitize(value, {
                ALLOWED_TAGS: ['svg', 'path', 'circle', 'div', 'span', 'strong', 'a'],
            });
        }

        // add a search input listener
        searchField.addEventListener('keyup', function (event) {
            // get the `Search` plugin's instance
            const search = hot.getPlugin('search');
            // use the `Search` plugin's `query()` method
            const queryResult = search.query(event.target.value);

            console.log(queryResult);

            hot.render();
        });
    </script>
{% endblock jslibs %}